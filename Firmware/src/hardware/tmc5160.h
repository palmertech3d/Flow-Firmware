#ifndef TMC5160_H
#define TMC5160_H

#include <SPI.h>
#include "../HAL/megaatmega2560/megaatmega2560.h"

// CHOPPER CONFIG
#define REG_COPCONF 0xEC
#define REG_COOLCONF 0xED
#define REG_IHOLD_IRUN 0x90
#define REG_TPOWERDOWN 0x91
#define REG_GCONF 0x80
#define REG_TPWM_THRS 0x93

#define COPCONF_SHORT_TO_SUPPLY_DISABLE 0x80000000ul
#define COPCONF_SHORT_TO_GND_DISABLE 0x40000000ul
#define COPCONF_DOUBLE_EDGE_EN 0x20000000ul
#define COPCONF_USTEP_256 0x10000000ul
#define COPCONF_USTEP_RESOLTN_MASK 0x0F000000ul
#define COPCONF_USTEP_RESOLTN_SHIFT 24
#define COPCONF_TPFD_MASK 0x00F00000ul
#define COPCONF_TPFD_SHIFT 20
#define COPCONF_VHIGHCHM_HIGH_VEL_CHOP 0x00080000ul
#define COPCONF_VHIGHFS_HIGH_VEL_FULLSTEP 0x00040000ul
#define COPCONF_TIME_BLANK_MASK 0x00018000ul
#define COPCONF_TIME_BLANK_SHIFT 15
#define COPCONF_CHM_CHOP_MODE 0x00004000ul
#define COPCONF_DISFDCC_CHOP_MODE_FAST_DECAY_DISABLE_COMPARATOR 0x00001000ul
#define COPCONF_FD3 0x00000800ul
#define COPCONF_HEND_MASK 0x00000780ul
#define COPCONF_HEND_SHIFT 7
#define COPCONF_HSTRT_MASK 0x00000070ul
#define COPCONF_HSTRT_SHIFT 4
#define COPCONF_TOFF_MASK 0x0000000Ful
#define COPCONF_TOFF_SHIFT 0

class TMC5160 {
public:

static void init();

private:

static unsigned long sendData(unsigned long address, unsigned long datagram);
}

;

#endif // TMC5160_H
